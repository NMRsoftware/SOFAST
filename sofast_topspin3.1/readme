Instruction to perform sofast experiments

Reference:
15N and 13C- SOFAST-HMQC editing enhances 3D-NOESY sensitivity in highly deuterated, 
selectively [1H,13C]-labeled proteins.
Rossi, P., Xia, Y., Khanra, N. et al. J Biomol NMR (2016). doi:10.1007/s10858-016-0074-5


================================
(A) edasp configuration:
It uses Bruker standard channel configuration. Channel F1, F2 and F3 in edasp are for 1H, 13C and
15N, respectively.


================================
(B) Create two parameter files:
(a) for HC2D_N 
type in command: rpar HSQCGPPH
type in command: edasp; click arrow under F3; choose 15N; click Default at bottom; 
		 and click "Save and Close"
type in command: o3p 118  
type in command: wpar HC2D_N  

(b) for HNN3D
type in command: rpar HNCAGPWG3D
type in command: eda; find out parameter NUC1 and change 13C to 15N for F1 dimension 
type in command: wpar HNN3D


================================
(C) Shaped pulses:
The package uses two Bruker standard shaped pulses Pc9_4_90.1000 and Reburp.1000.

Two new shaped pulses, consine- and sine-modulated Pc9_4_90.1000 shaped pulses, are 
automatically generated by the script sofast.py. The pulse width is determined by
the excitation bandwidth (5 ppm), and the modulation frequency is 3.7 ppm. For detail,
please see the subroutine myshape in sofast.py.


================================
(D) Copy files:
Use gedit or nedit to open the file sofast.py in folder py, find the line:
	execfile("/opt/MNMR/py/mymodule.py"),
replace the path /opt/MNMR/py with your correct path: 	
	<TOPSPIN HOME>/exp/stan/nmr/py/user

Copy all pulse sequences in folder pp  to <TOPSPIN HOME>/exp/stan/nmr/lists/pp/user
Copy all python scripts  in folder py  to <TOPSPIN HOME>/exp/stan/nmr/py/user
Copy the bi_garp_2pl.2   in folder cpd to <TOPSPIN HOME>/exp/stan/nmr/lists/cpd

The <TOPSPIN HOME> depends on installation of topspin, and it may be 
/opt/topspin3.1 or /opt/topspin3.2.


================================
(E) Setup of experiments:
(a) tune and match your probe, lock field, do topshim gui, do pulsecal to get pulse width.
(b) type in sofast and choose an experiment.
(c) adjust ns (number of scans), td (time domain sizes), sw (spectral widths), d1 & d8.
(d) if there is data overflow due to bad water suppression, you may increase gradient strength
    to 45 or 55% of the last pair of gradients in pulse sequences.
(e) in this set of experiments, garp is used for both 15N- and 13C-decoupling. But if users see some 
    artifacts like that described in JMR 156, 258-261 (2002), one may use bi_garp_2pl for 15N-decoupling.


================================
(F) Water suppression:
If there is data overflow from bad water suppression, one may increase the gpz1 or the last pair of PFG
to 35% or even 45%.

================================
(G) Data processing of :simultaneous acquisition:
In experiments of simultaneous acquisition (experiment number 12, 17 or 21 that are given in "List of 
experiments" below), data acquisition order is 312 instead of regular 321. When one uses nmrPipe's command
bruker to convert Bruker format to nmrPipe, it always shows parameters in order 321. So one needs to swap
parameters of F1 and F2 dimensions or Y and Z dimensions.  


================================
(H) List of experiments:      
1.  2D 15N     HMQC for amide HN
2.  2D 13C     HMQC for methyl CH3 
3.  2D 13C     HMQC for aromatic ring
4.  2D 15N/13C HMQC for both amide HN and methyl CH3
5.  3D NOESY-BTROSY for   Hall(F1)- N(F2)Hn(F3)
6.  3D HMQC-NOESY-HMQC for  Cm(F1)- Cm(F2)Hm(F3)
7.  3D HMQC-NOESY-HMQC for  Ca(F1)- Cm(F2)Hm(F3)
8.  3D HMQC-NOESY-HMQC for   N(F1)- Cm(F2)Hm(F3)
9.  3D HMQC-NOESY-HMQC for  Cm(F1)-  N(F2)Hn(F3)
10. 3D HMQC-NOESY-HMQC for  Ca(F1)-  N(F2)Hn(F3)
11. 3D HMQC-NOESY-HMQC for   N(F1)-  N(F2)Hn(F3)
12. 3D HMQC-NOESY-HMQC for NCm(F1)-NCm(F2)HnHm(F3)
14. 3D NOESY-HMQC for	  Hall(F1)- Cm(F2)Hm(F3)
15. 3D NOESY-HMQC for	  HnHa(F1)- Cm(F2)Hm(F3)
16. 3D NOESY-HMQC for	    Hm(F1)- Cm(F2)Hm(F3)
17. 3D NOESY-HMQC for	HnHaHM(F1)- Cm(F2)Hm(F3)	 
18. 3D NOESY-HMQC for	  HnHa(F1)-  N(F2)Hn(F3)
19. 3D NOESY-HMQC for	  Hall(F1)-  N(F2)Hn(F3)
20. 3D NOESY-HMQC for	  Hall(F1)-NCm(F2)HnHm(F3)
21. 3D NOESY-HMQC for	HnHaHM(F1)-NCm(F2)HnHm(F3)
22. 3D NOESY-HMQC for	    Ha(F1)-NCm(F2)HnHm(F3)	 
23. 3D NOESY-HMQC for	    Hm(F1)- Ca(F2)Ha(F3)	 
24. 3D NOESY-HMQC for	    Hm(F1)-  N(F2)Hn(F3)	 


================================
(I) Lists of pulse sequences:
1.  IBS_SOFAST.x 
2.  IBS_C_SOFAST.x 
3.  sfhmqc.aro 
4.  sfCNhmqcgpph19
5.  noesysftrosy3d.Hall-NHn 
6.  sfhmqcnoesyhmqc3d.Cm-CmHm 
7.  sfhmqcnoesyhmqc3d.Ca-CmHm 
8.  sfNhmqcnoesyhmqc3d.N-CmHm 
9.  sfhmqcnoesyNhmqc3d.Cm-NHn 
10. sfhmqcnoesyNhmqc3d.Ca-NHn 
11. sfNhmqcnoesyNhmqc3d.N-NHn 
12. sfCNhmqcnoeCNhmqc3d.NCm-NCmHnHm 
14. noesysfhmqc3d.Hall-CmHm 
15. sfnoesyhmqc3d.HnHa-CmHm 
16. sfnoesyhmqc3d.Hm-CmHm 
17. sfnoesyhmqc3d.HnHaHm-CmHm 
18. sfnoesyNhmqc3d.HnHa-NHn 
19. noesysfNhmqc3d.Hall-NHn 
20. noesysfCNhmqc3d19.Hall-NCmHnHm 
21. sfCNnoesyCNhmqc3d.Hall-NCmHnHm 
22. sfhmqcnoesyCNhmqc3d.Ha-NCmHnHm
23. sfnoesyhmqc3d.Hm-CaHa 
24. sfnoesyNhmqc3d.Hm-NHn

